<?xml version="1.0"?>
<root>

  <!-- input source -->
  <vkchangeinputsourcedef>
    <name>KeyCode::VK_CHANGE_INPUTSOURCE_TO_ENGLISH</name>
    <inputsourceid_equal>com.apple.keylayout.ABC</inputsourceid_equal>
  </vkchangeinputsourcedef>

  <!-- replacement defs -->
  <replacementdef>
    <replacementname>MOD_EXT</replacementname>
    <replacementvalue> <![CDATA[ Option::KEYTOKEY_INCREASE_MODIFIER_FLAGS, ModifierFlag::EXTRA1, ]]> </replacementvalue>
  </replacementdef>
  <replacementdef>
    <replacementname>MOD</replacementname>
    <replacementvalue> <![CDATA[ ModifierFlag ]]> </replacementvalue>
  </replacementdef>
  <replacementdef>
    <replacementname>CTRL</replacementname>
    <replacementvalue> <![CDATA[ ModifierFlag::CONTROL_L ]]> </replacementvalue>
  </replacementdef>
  <replacementdef>
    <replacementname>CMD</replacementname>
    <replacementvalue> <![CDATA[ ModifierFlag::COMMAND_L ]]> </replacementvalue>
  </replacementdef>
  <replacementdef>
    <replacementname>ALT</replacementname>
    <replacementvalue> <![CDATA[ ModifierFlag::OPTION_L ]]> </replacementvalue>
  </replacementdef>
  <replacementdef>
    <replacementname>SHIFT</replacementname>
    <replacementvalue> <![CDATA[ ModifierFlag::SHIFT_L ]]> </replacementvalue>
  </replacementdef>
  <replacementdef>
    <replacementname>FN</replacementname>
    <replacementvalue> <![CDATA[ ModifierFlag::FN ]]> </replacementvalue>
  </replacementdef>

  <!-- items -->
  <item>
    <name>John Grib customized (이종립 개인 설정)</name>
    <item>
      <name>VI, IntelliJ IDEA 에서는 command_l 키를 control_l 키로 한다.</name>
      <appendix>단, command + tab 은 작동하게 한다.</appendix>
      <identifier>johngrib.command_l_to_control_l_only_intellij_idea</identifier>
      <block>
        <only>IntelliJ,VI</only>
        <autogen>
          __KeyToKey__ 
          KeyCode::COMMAND_L, 
          KeyCode::CONTROL_L,
        </autogen>
        <autogen>
          __KeyToKey__
          KeyCode::TAB, {{CTRL}}, 
          KeyCode::TAB, {{CMD}},
        </autogen>
        <!--
        <autogen>
          __KeyToKey__
          KeyCode::COMMAND_R,
          KeyCode::COMMAND_R,
        </autogen>
        -->
      </block>
    </item>
    <!-- F18 VI 섹션 -->
    <item>
      <identifier>johngrib.f18_vi_keymap</identifier>
      <name>F18 키 확장</name>
      <autogen>
        __KeyOverlaidModifier__
        KeyCode::F18,
        KeyCode::VK_MODIFIER_EXTRA1,
        KeyCode::F18,
      </autogen>
      <!-- COMMAND_R 을 F18 로 사용한다. -->
      <autogen>
        __KeyOverlaidModifier__
        KeyCode::COMMAND_R,
        KeyCode::VK_MODIFIER_EXTRA1,
        KeyCode::F18,
      </autogen>
      <appendix>F18 + hjkl</appendix>
      <appendix>F18 + b, 0, 4($), 6(^)</appendix>
      <appendix>F18 + g, G</appendix>
      <appendix>F18 + x, X</appendix>
      <appendix>F18 + command + f</appendix>
      <appendix>F18 + command + b</appendix>
      <appendix>F18 + ' (dock open/close)</appendix>
      <block>
        <modifier_only>ModifierFlag::EXTRA1</modifier_only>
        <!-- dock 호출 -->
        <autogen> __KeyToKey__ KeyCode::QUOTE, KeyCode::F3, {{CTRL}}, {{MOD_EXT}} </autogen>
        <!-- cmd + f : pgdn / cmd + b : pgup -->
        <autogen> __KeyToKey__ KeyCode::F, {{CMD}}, KeyCode::PAGEDOWN, {{ALT}}, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::B, {{CMD}}, KeyCode::PAGEUP, {{ALT}}, {{MOD_EXT}} </autogen>
        <!-- hjkl -->
        <autogen> __KeyToKey__ KeyCode::H, KeyCode::CURSOR_LEFT, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::J, KeyCode::CURSOR_DOWN, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::K, KeyCode::CURSOR_UP,   {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::L, KeyCode::CURSOR_RIGHT,{{MOD_EXT}} </autogen>
        <!-- X, x, G, g -->
        <autogen> __KeyToKey__ KeyCode::X, {{SHIFT}}, KeyCode::DELETE, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::X, KeyCode::DELETE, {{FN}}, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::G, {{SHIFT}}, KeyCode::CURSOR_DOWN, {{CMD}}, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::G, KeyCode::CURSOR_UP, {{CMD}}, {{MOD_EXT}} </autogen>
        <!-- mouse control -->
        <autogen> __KeyToKey__ KeyCode::W, KeyCode::VK_MOUSEKEY_UP, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::A, KeyCode::VK_MOUSEKEY_LEFT, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::S, KeyCode::VK_MOUSEKEY_DOWN, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::D, KeyCode::VK_MOUSEKEY_RIGHT, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::Q, PointingButton::LEFT, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::E, PointingButton::RIGHT, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::R, KeyCode::VK_MOUSEKEY_SCROLL_DOWN, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::F, KeyCode::VK_MOUSEKEY_SCROLL_UP, {{MOD_EXT}} </autogen>
        <!-- b 0 4($) 6(^)-->
        <autogen> __KeyToKey__ KeyCode::B, KeyCode::CURSOR_LEFT, {{ALT}}, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::0, KeyCode::CURSOR_LEFT, {{CMD}}, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::4, KeyCode::CURSOR_RIGHT, {{CMD}}, {{MOD_EXT}} </autogen>
        <autogen>
          __KeyToKey__
          KeyCode::6,
          @begin
            KeyCode::CURSOR_LEFT, {{CMD}},
            KeyCode::CURSOR_RIGHT,{{ALT}},
            KeyCode::CURSOR_LEFT, {{ALT}},
          @end
          {{MOD_EXT}}
        </autogen>
        <!-- 마우스 포인터를 1,2 번 모니터로 -->
        <autogen>
          __KeyToKey__
          KeyCode::1,
          @begin
            KeyCode::VK_OPEN_URL_SHELL_warp_mouse_cursor_position_screen_center_0,
          @end
          {{MOD_EXT}}
        </autogen>
        <autogen>
          __KeyToKey__
          KeyCode::2,
          @begin
            KeyCode::VK_OPEN_URL_SHELL_warp_mouse_cursor_position_screen_center_1,
          @end
          {{MOD_EXT}}
        </autogen>
        <!-- CMD + Z,X,C,V -->
        <autogen> __KeyToKey__ KeyCode::Z, KeyCode::Z, {{CMD}}, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::X, KeyCode::X, {{CMD}}, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::C, KeyCode::C, {{CMD}}, {{MOD_EXT}} </autogen>
        <autogen> __KeyToKey__ KeyCode::V, KeyCode::V, {{CMD}}, {{MOD_EXT}} </autogen>
        <!-- CAPSLOCK -->
        <autogen> __KeyToKey__ KeyCode::U, KeyCode::CAPSLOCK, {{MOD_EXT}} </autogen>
      </block>
    </item>
    <!-- Hyper Key 섹션 -->
    <item>
      <appendix>Seil 을 사용해서 CAPSLOCK 을 F18 로, ContextMenu 를 F19 로 매핑한 다음
        설정하도록 한다.
      </appendix>
      <item>
        <identifier>johngrib.f18_to_hyper</identifier>
        <appendix>F18 키를 Hyper 로 설정한다.</appendix>
        <autogen>
          --KeyOverlaidModifier--
          KeyCode::F18,
          KeyCode::COMMAND_L, {{ALT}} | {{SHIFT}} | {{CTRL}},
          KeyCode::F18
        </autogen>
      </item>
      <item>
        <identifier>johngrib.f19_to_hyper</identifier>
        <appendix>F19 키를 Hyper 로 설정한다.</appendix>
        <autogen>
          --KeyOverlaidModifier--
          KeyCode::F19,
          KeyCode::COMMAND_L, {{ALT}} | {{SHIFT}} | {{CTRL}},
          KeyCode::F19
        </autogen>
      </item>
    </item>
    <item>
      <appendix>VI 보조 설정</appendix>
      <item>
        <appendix>ESC 키를 누를때마다 영문 입력 모드로 전환하기(for VI)</appendix>
        <identifier>johngrib.esc_to_abc_esc</identifier>
        <autogen>
          __KeyToKey__
          KeyCode::ESCAPE,
          KeyCode::VK_CHANGE_INPUTSOURCE_TO_ENGLISH,
          KeyCode::ESCAPE,
        </autogen>
      </item>
      <item>
        <identifier>johngrib.f18_to_abc_esc</identifier>
        <appendix>F18 키를 ESC, 영문 입력 모드로 설정한다.</appendix>
        <autogen>
          __KeyToKey__
          KeyCode::F18,
          KeyCode::VK_CHANGE_INPUTSOURCE_TO_ENGLISH,
          KeyCode::ESCAPE,
        </autogen>
      </item>
    </item>

    <!-- 한영/한자 관련 설정 -->
    <item>
      <appendix>한영전환/한자 관련 설정</appendix>
      <appendix>(Command + Control + Option + Space 가 한영 전환으로 설정되어 있어야 한다)
      </appendix>
      <!-- Shift + Space 를 한영 전환으로 설정한다. -->
      <item>
        <identifier>johngrib.shift_space_to_haneng</identifier>
        <appendix>Shift + Space 를 한영 전환으로 설정한다.</appendix>
        <not>VIRTUALMACHINE, REMOTEDESKTOPCONNECTION</not>
        <autogen>
          __KeyToKey__
          KeyCode::SPACE,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT,

          KeyCode::SPACE, {{CMD}} | {{ALT}} | {{CTRL}},
          Option::NOREPEAT
        </autogen>
      </item>
      <!-- Option_R 을 한/영 전환으로 설정한다. -->
      <item>
        <name>Option_R 을 한/영 전환으로 설정한다.</name>
        <device_not>
          DeviceVendor::APPLE_COMPUTER, DeviceProduct::ANY,
          DeviceVendor::Apple_Bluetooth, DeviceProduct::ANY,
        </device_not>
        <identifier>johngrib.option_r_to_haneng</identifier>
        <block>
          <not>VIRTUALMACHINE, REMOTEDESKTOPCONNECTION</not>
          <autogen>
            __KeyToKey__
            KeyCode::OPTION_R,

            KeyCode::SPACE, {{CMD}} | {{ALT}} | {{CTRL}},
            Option::NOREPEAT
          </autogen>
        </block>
        <block>
          <only>VIRTUALMACHINE, REMOTEDESKTOPCONNECTION</only>
          <autogen>__KeyToKey__ KeyCode::OPTION_R, {{ HANENG_AT_WIN }}
          </autogen>
        </block>
      </item>
      <!-- Command_R 을 한자 키로 설정한다. -->
      <item>
        <name>Command_R 을 한자 키로 설정한다.</name>
        <device_not>
          DeviceVendor::APPLE_COMPUTER, DeviceProduct::ANY,
          DeviceVendor::Apple_Bluetooth, DeviceProduct::ANY,
        </device_not>
        <identifier>johngrib.command_r_to_hanja
        </identifier>
        <block>
          <not>VIRTUALMACHINE, REMOTEDESKTOPCONNECTION</not>
          <autogen>
            __KeyToKey__
            KeyCode::COMMAND_R,
            {{ HANJA_AT_MAC }}
          </autogen>
        </block>
        <block>
          <only>VIRTUALMACHINE, REMOTEDESKTOPCONNECTION</only>
          <autogen>__KeyToKey__ KeyCode::COMMAND_R, {{ HANJA_AT_WIN }}
          </autogen>
        </block>
      </item>
      <!-- Control_R 을 한자 키로 설정한다. -->
      <item>
        <name>Control_R 을 한자 키로 설정한다.</name>
        <device_not>
          DeviceVendor::APPLE_COMPUTER, DeviceProduct::ANY,
          DeviceVendor::Apple_Bluetooth, DeviceProduct::ANY,
        </device_not>
        <identifier>johngrib.control_r_to_hanja</identifier>
        <block>
          <not>VIRTUALMACHINE, REMOTEDESKTOPCONNECTION</not>
          <autogen>
            __KeyToKey__
            KeyCode::CONTROL_R,
            {{ HANJA_AT_MAC }}
          </autogen>
        </block>
        <block>
          <only>VIRTUALMACHINE, REMOTEDESKTOPCONNECTION</only>
          <autogen>__KeyToKey__ KeyCode::CONTROL_R, {{ HANJA_AT_WIN }}
          </autogen>
        </block>
      </item>
    </item>
  </item>

</root>